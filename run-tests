#!/usr/bin/env bash
set -e

iterations=1

s3lib_jars=$LB_INSTALL_PREFIX/s3lib/lib/java

test_jars=$PWD/build/jars
   # for local testing

univ="$LB_UNIVERSE_DEPS/lib/java"

cp="$univ/httpcore-4.4.4.jar:$univ/httpclient-4.5.2.jar:$univ/aws-java-sdk-1.11.102.jar:$univ/jackson-annotations-2.6.0.jar:$univ/jackson-core-2.6.6.jar:$univ/jackson-databind-2.6.6.jar:$univ/jcommander-1.29.jar:$univ/log4j-1.2.13.jar:$univ/commons-io-2.4.jar:$univ/commons-codec-1.9.jar:$univ/commons-logging-1.1.3.jar:$univ/joda-time-2.8.1.jar:$univ/guava-15.0.jar:$univ/junit-4.8.2.jar:$test_jars/s3lib-test.jar:$s3lib_jars/s3lib-test.jar"

for i in $(seq 1 $iterations);
do
  echo "------------- Iteration $i ------------------"
  java -cp $cp com.logicblox.s3lib.TestRunner $*
done
